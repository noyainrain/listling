<!DOCTYPE html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <!-- NOTE: Use strict-origin once there is cross-browser support -->
    <meta name="referrer" content="origin" />

    {% raw micro_dependencies() %}
    <link rel="stylesheet" href="{{ static_url('listling.css') }}" />
    <script src="{{ static_url('listling/util.js') }}" defer="defer"></script>
    <script src="{{ static_url('listling/components/list.js') }}" defer="defer"></script>
    <script src="{{ static_url('listling/components/start.js') }}" defer="defer"></script>
    <script src="{{ static_url('listling/index.js') }}" defer="defer"></script>
</head>

<body is="listling-ui">
    <li class="listling-ui-intro" slot="menu">
        <a class="link" href="/intro"><i class="fa fa-fw fa-rocket"></i> Introduction</a>
    </li>

    {% raw micro_boot() %}

    {% raw micro_templates() %}

    <template class="listling-intro-page-template">
        <div class="listling-intro-intro">
            <h1 class="micro-logo">
                <img data-src="or settings.icon ''" /> <span data-content="settings.title"></span>
            </h1>
            <p class="listling-intro-slogan">Collaborative lists</p>
            <p class="listling-intro-keywords">Free · Simple · No registration required</p>
        </div>

        <div class="listling-intro-intro">
            <ul class="listling-intro-use-cases" data-content="list useCases 'useCase'">
                <template>
                    <li
                        class="micro-quick-nav"
                        data-class-listling-selected="eq useCase selectedUseCase"
                        data-class-listling-intro-no-example="eq useCase.id 'simple'"
                        tabindex="0"
                        data-onmouseenter="focusUseCase"
                        data-onfocus="bind selectUseCase useCase"
                    >
                        <i data-class-name="format 'fa fa-{icon}' 'icon' useCase.icon"></i>
                        <h1 data-content="useCase.title"></h1>
                        <div>
                            <p>
                                <button
                                    is="micro-button"
                                    type="button"
                                    class="listling-intro-create-list action"
                                    title="⌨ S"
                                    data-run="bind createList useCase.id"
                                    data-onfocus="bind selectUseCase useCase"
                                >
                                    <i class="fa fa-paper-plane"></i> Start
                                </button>
                            </p>
                            <p class="listling-intro-create-example">
                                or view
                                <button
                                    is="micro-button"
                                    type="button"
                                    class="link"
                                    title="⌨ E"
                                    data-run="bind createExample useCase"
                                    data-onfocus="bind selectUseCase useCase"
                                >
                                    <i class="fa fa-book"></i> Example
                                </button>
                            </p>
                        </div>
                    </li>
                </template>
            </ul>
            <p class="listling-intro-missing">
                <small>
                    Missing a certain kind of list?
                    <a class="action action-subtle" data-href="settings.feedback_url"
                       data-shortcut="new Shortcut 'T'">
                        <i class="fa fa-envelope"></i> Tell us!
                    </a>
                </small>
            </p>
        </div>

        <footer>
            <p><small>Made with <i class="fa fa-heart"></i> in Berlin</small></p>
        </footer>
    </template>
    <style>
        .listling-intro-intro {
            margin: calc(1.5rem * 3) 0;
            text-align: center;
        }

        .listling-intro-intro .micro-logo {
            font-size: 3em;
        }

        .listling-intro-slogan {
            font-size: 2em;
            font-weight: 300;
        }

        .listling-intro-keywords {
            color: #888;
        }

        .listling-intro-use-cases {
            display: grid;
            padding: 0;
            grid-template-columns: repeat(auto-fill, calc(14ch * 1.33 + 1.5rem / 2));
            grid-gap: calc(1.5rem / 2) 0;
            justify-content: center;
            list-style: none;
        }

        .listling-intro-use-cases li {
            padding: calc(1.5rem / 4);
            border: 1px solid transparent;
            border-radius: calc(1.5rem / 8);
        }

        .listling-intro-use-cases li.listling-selected {
            border-color: #ddd;
        }

        .listling-intro-use-cases li h1,
        .listling-intro-use-cases li p {
            margin: calc(1.5rem / 4) 0 0 0;
        }

        .listling-intro-use-cases li > i {
            display: block;
            font-size: 2em;
            color: #888;
        }

        .listling-intro-use-cases li h1 {
            font-size: 1.33em;
        }

        .listling-intro-use-cases li:not(.listling-selected) div {
            height: 0;
            overflow: hidden;
        }

        .listling-intro-create-example {
            color: #888;
        }

        .listling-intro-use-cases li.listling-intro-no-example .listling-intro-create-example {
            visibility: hidden;
        }

        listling-intro-page footer {
            text-align: center;
        }

        listling-intro-page footer i {
            color: lightpink;
        }

        [is="listling-ui"]:not(.micro-ui-settings-have-feedback-url) .listling-intro-missing {
            display: none;
        }
    </style>

    <template class="listling-about-page-template">
        <micro-about-page
            short="{title} is a service to make and edit lists collaboratively."
            project-title="Open Listling" project-url="https://github.com/noyainrain/listling"
            project-icon="{{ static_url('images/listling.svg') }}" project-license="AGPL"
            project-license-url="https://www.gnu.org/licenses/agpl.html"
            project-copyright="Copyright © 2019 Open Listling contributors">
        </micro-about-page>
    </template>

    <template class="listling-list-page-template">
        <form>
            <header class="listling-list-title micro-heading micro-panel">
                <h1>
                    <span class="listling-list-mode-view" data-content="lst.title"></span>
                    <label class="listling-list-mode-edit">
                        <input name="title" placeholder="List title" required="required"
                               autocomplete="off" data-value="or lst.title ''" />
                    </label>
                </h1>
                <button
                    is="micro-button" type="button"
                    class="listling-list-create-item-top action listling-list-mode-view micro-interactive"
                    title="Add item (⌨ A)" data-run="startCreateItem"
                >
                    <i class="fa fa-plus-circle"></i>
                </button>
                <ul is="micro-menu" class="listling-list-menu micro-secondary listling-list-mode-view micro-interactive">
                    <li>
                        <button type="button" class="link"><i class="fa fa-bars"></i></button>
                        <ul is="micro-menu">
                            <li class="listling-list-edit">
                                <button is="micro-button" type="button" class="action"
                                        data-run="startEdit" data-shortcut="new Shortcut 'E'">
                                    <i class="fa fa-fw fa-pencil-alt"></i> Edit
                                </button>
                            </li>
                            <li>
                                <button
                                    is="micro-button" type="button" class="action"
                                    data-run="bind share lst" data-shortcut="new Shortcut 'S'"
                                >
                                    <i class="fa fa-fw fa-user-friends"></i> Share
                                </button>
                            </li>
                            <li
                                class="listling-list-subscribe"
                                data-content="switch lst.activity.user_subscribed"
                            >
                                <template>
                                    <button
                                        is="micro-button" type="button" class="action"
                                        data-run="unsubscribe" data-shortcut="new Shortcut 'H'"
                                    >
                                        <i class="fa fa-fw fa-bell-slash"></i> Unsubscribe
                                    </button>
                                </template>
                                <template>
                                    <button
                                        is="micro-button" type="button" class="action"
                                        data-run="subscribe" data-shortcut="new Shortcut 'H'"
                                    >
                                        <i class="fa fa-fw fa-bell"></i> Subscribe
                                    </button>
                                </template>
                            </li>
                            <li class="listling-list-enter-presentation">
                                <button
                                    is="micro-button" type="button" class="link"
                                    data-run="bindThis presentation.enter presentation"
                                    data-shortcut="new Shortcut 'D'"
                                >
                                    <i class="fa fa-fw fa-chalkboard"></i> Presentation
                                </button>
                            </li>
                        </ul>
                    </li>
                </ul>
            </header>

            <div class="listling-list-mode-view" data-content="switch locationEnabled">
                <template>
                    <micro-map data-locations="locations"></micro-map>
                </template>
            </div>

            <p
                class="listling-list-mode-view micro-multiline"
                data-content="markup lst.description"
            ></p>
            <label class="listling-list-mode-edit">
                <textarea name="description" placeholder="Description (optional)"
                          data-value="or lst.description ''">
                </textarea>
            </label>

            <div class="listling-list-settings listling-list-mode-edit"
                 data-class-listling-list-settings-expanded="settingsExpanded">
                <p class="listling-detail">
                    <button is="micro-button" type="button" class="link" title="⌨ C"
                            data-run="toggleSettings">
                        <i class="fa fa-search-plus"></i> More settings
                    </button>
                </p>
                <section>
                    <header class="micro-heading micro-panel">
                        <h1>Settings</h1>
                        <button
                            is="micro-button" type="button" class="link" title="⌨ S"
                            data-run="toggleSettings"
                        >
                            <i class="fa fa-fw fa-search-minus"></i>
                        </button>
                    </header>

                    <fieldset>
                        <legend>Features</legend>
                        <label>
                            <input type="checkbox" name="features" value="check"
                                   data-checked="includes lst.features 'check'" />
                            Check items
                        </label>
                        <label>
                            <input
                                type="checkbox" name="features" value="assign"
                                data-checked="includes lst.features 'assign'"
                            />
                            Assign to items
                        </label>
                        <label>
                            <input
                                type="checkbox" name="features" value="vote"
                                data-checked="includes lst.features 'vote'"
                            />
                            Vote for items
                        </label>
                        <label class="listling-list-features-location">
                            <input
                                type="checkbox" name="features" value="location"
                                data-checked="includes lst.features 'location'"
                            />
                            Item location
                        </label>
                        <label>
                            <input
                                type="checkbox" name="features" value="play"
                                data-checked="includes lst.features 'play'"
                            />
                            Play list
                        </label>
                    </fieldset>

                    <label>
                        List mode
                        <input
                            name="mode" readonly="readonly" data-value="modeToText lst.mode"
                            data-value-as-object="lst.mode"
                        />
                        <micro-options data-options="modes" data-to-text="bind modeToText null">
                            <template>
                                <p>
                                    <span data-content="toText option"></span>
                                    <small data-content="switch option 'collaborate' 'view'">
                                        <template>
                                            Users collaborate on the list. They can edit everything.
                                        </template>
                                        <template>
                                            Users view the list. They cannot edit anything.
                                        </template>
                                    </small>
                                </p>
                            </template>
                        </micro-options>
                    </label>
                </section>
            </div>

            <ul is="micro-menu" class="listling-list-mode-edit">
                <li>
                    <button is="micro-button" class="action" title="⌨ Enter" data-run="edit">
                        <i class="fa fa-check-circle"></i> Done
                    </button>
                </li>
                <li>
                    <button is="micro-button" type="button" class="link" data-run="cancelEdit"
                            data-shortcut="new Shortcut 'Escape'">
                        Cancel
                    </button>
                </li>
            </ul>
        </form>

        <ol
            is="micro-ol"
            class="listling-list-items listling-list-mode-view"
            data-onmoveitem="moveItemDrag"
            data-content="list presentItems 'item'"
        >
            <template>
                <li
                    is="listling-item" class="micro-quick-nav" data-item="item" data-list="lst"
                    data-onmove="moveItemKey"
                ></li>
            </template>
        </ol>

        <div class="listling-list-trash listling-list-mode-view micro-interactive"
             data-class-listling-list-trash-expanded="trashExpanded">
            <p class="micro-small">
                <span
                    data-content="formatPlural 'There is one trashed item.' 'There are {n} trashed items.' 'n' trashedItemsCount">
                </span>
                <button is="micro-button" type="button" class="link" title="Show (⌨ G)"
                        data-run="toggleTrash">
                    <i class="fa fa-search-plus"></i>
                </button>
            </p>
            <div>
                <header class="micro-heading micro-panel">
                    <h1>Trashed items</h1>
                    <button is="micro-button" type="button" class="link" title="Hide (⌨ G)"
                            data-run="toggleTrash">
                        <i class="fa fa-fw fa-search-minus"></i>
                    </button>
                </header>
                <p class="micro-small">
                    <i class="fa fa-hourglass-half"></i> Trashed items are permanently deleted after
                    7 days.
                </p>
                <ul class="listling-list-trashed-items" data-content="list trashedItems 'item'">
                    <template>
                        <li
                            is="listling-item" class="micro-quick-nav" data-item="item"
                            data-list="lst"
                        ></li>
                    </template>
                </ul>
            </div>
        </div>

        <div class="listling-list-create-item listling-list-mode-view micro-interactive"
             data-class-listling-list-creating-item="creatingItem">
            <p>
                <button is="micro-button" type="button" class="action" data-run="startCreateItem"
                        data-shortcut="new Shortcut 'A'">
                    <i class="fa fa-plus-circle"></i> Add item
                </button>
            </p>
            <li is="listling-item" data-onedit="stopCreateItem" data-oncancel="stopCreateItem"></li>
        </div>

        <aside class="listling-list-mode-view micro-interactive">
            <i class="fa fa-user-cog"></i> List by
            <micro-user data-user="lst.authors.0"></micro-user> · <i class="fa fa-pencil-alt"></i>
            Edited by
            <span data-content="join lst.authors 'user'">
                <template><micro-user data-user="user"></micro-user></template>
            </span>
        </aside>

        <footer class="listling-list-footer" data-onmousedown="presentation.onFooterMouseDown">
            <div class="micro-ui-inside micro-panel">
                <div data-content="switch presentationMode">
                    <template>
                        <button
                            is="micro-button" type="button" class="listling-list-previous link"
                            data-run="bind quickNavigate 'prev'"
                            data-shortcut="new Shortcut 'ArrowUp' 'Previous'"
                        >
                            <i class="fa fa-fw fa-arrow-circle-up"></i>
                        </button>
                    </template>
                </div>
                <button
                    is="micro-button" type="button" class="listling-list-play-previous action"
                    data-run="playlistPlayPrevious" data-shortcut="new Shortcut 'B' 'Play previous'"
                >
                    <i class="fa fa-fw fa-step-backward"></i>
                </button>
                <button
                    is="micro-button" class="listling-list-play-pause action"
                    data-run="playlistPlayPause" data-shortcut="new Shortcut 'P' 'Play / Pause'"
                >
                    <i
                        class="fa fa-fw" data-class-fa-play="not playlistPlaying"
                        data-class-fa-pause="playlistPlaying"
                    ></i>
                </button>
                <div data-content="switch presentationMode">
                    <template>
                        <button
                            is="micro-button" type="button" class="listling-list-next link"
                            data-run="bind quickNavigate 'next'"
                            data-shortcut="new Shortcut 'ArrowDown' 'Next'"
                        >
                            <i class="fa fa-fw fa-arrow-circle-down"></i>
                        </button>
                    </template>
                </div>
                <button
                    is="micro-button" type="button" class="listling-list-play-next action"
                    data-run="playlistPlayNext" data-shortcut="new Shortcut 'F' 'Play next'"
                >
                    <i class="fa fa-fw fa-step-forward"></i>
                </button>
                <button
                    is="micro-button" type="button"
                    class="listling-list-exit-presentation link"
                    data-run="bindThis presentation.exit presentation"
                    data-shortcut="new Shortcut 'Escape' 'Exit'"
                >
                    <i class="fa fa-fw fa-times-circle"></i>
                </button>
            </div>
        </footer>
    </template>
    <style>
        .listling-list-scroll-snap {
            scroll-snap-type: block mandatory;
        }

        listling-list-page {
            display: block;
        }

        listling-list-page.listling-list-feature-play {
            padding-bottom: calc(var(--micro-size-rm) + 2 * var(--micro-size-xs));
        }

        body[noninteractive] listling-list-page {
            /* Ensure that every item can be scrolled to top */
            padding-bottom: 100vh;
        }

        .listling-list-title,
        .listling-list-items [is="listling-item"] {
            scroll-snap-align: start;
        }

        .listling-list-items,
        .listling-list-trashed-items {
            padding: 0;
        }

        .listling-list-trash .micro-heading {
            border: none;
            align-items: baseline
        }

        .listling-list-trash .micro-heading > h1 {
            font-size: 1em;
            font-weight: bold;
            color: #888;
        }

        body[noninteractive] [is="listling-item"] {
            opacity: 0.1;
            filter: blur(1px);
        }

        body[noninteractive] [is="listling-item"]:focus-within {
            box-shadow: none;
            opacity: 1;
            filter: none;
        }

        body[noninteractive] [is="listling-item"]:focus {
            box-shadow: none;
            opacity: 1;
            filter: none;
        }

        .listling-list-footer {
            position: fixed;
            z-index: 2;
            left: 0;
            right: 0;
            bottom: 0;
            box-shadow: 0 0 2px 1px rgba(0, 0, 0, 0.33);
            background: white;
        }

        .listling-list-exit-presentation {
            margin-left: auto;
        }

        listling-list-page:not(.listling-list-mode-view) .listling-list-mode-view,
        listling-list-page:not(.listling-list-mode-edit) .listling-list-mode-edit,
        listling-list-page:not(.listling-list-may-modify) .listling-list-create-item-top,
        listling-list-page:not(.listling-list-may-modify) .listling-list-edit,
        body:not(.micro-feature-es6-typed-array) .listling-list-subscribe,
        body:not(.micro-feature-service-workers) .listling-list-subscribe,
        body:not(.micro-feature-push) .listling-list-subscribe,
        body:not(.micro-ui-map-service-enabled) .listling-list-features-location,
        listling-list-page:not(.listling-list-has-trashed-items) .listling-list-trash,
        .listling-list-trash.listling-list-trash-expanded > p,
        .listling-list-trash:not(.listling-list-trash-expanded) > div,
        listling-list-page:not(.listling-list-may-modify) .listling-list-create-item,
        .listling-list-create-item.listling-list-creating-item > p,
        .listling-list-create-item:not(.listling-list-creating-item) > li,
        .listling-list-settings.listling-list-settings-expanded > p,
        .listling-list-settings:not(.listling-list-settings-expanded) > section,
        body:not([noninteractive]) listling-list-page:not(.listling-list-feature-play) > footer,
        listling-list-page.listling-list-feature-play .listling-list-previous,
        listling-list-page.listling-list-feature-play .listling-list-next,
        listling-list-page:not(.listling-list-feature-play) .listling-list-play-previous,
        listling-list-page:not(.listling-list-feature-play) .listling-list-play-pause,
        listling-list-page:not(.listling-list-feature-play) .listling-list-play-next,
        body:not([noninteractive]) .listling-list-exit-presentation {
            display: none;
        }
    </style>

    <template class="listling-item-template">
        <form
            data-class-listling-item-has-content="hasContent item lst assigneesCount"
            data-class-listling-item-votes-user-voted="votesMeta.user_voted"
            data-class-listling-item-expanded="expanded"
        >
            <header class="micro-panel">
                <div class="micro-ol-handle listling-item-mode-view micro-interactive"
                     title="Move (⌨ Alt + ↑ / Alt + ↓)" tabindex="0">
                </div>

                <button
                    is="micro-button" type="button"
                    class="listling-item-vote action listling-item-mode-view" data-run="voteUnvote"
                    data-shortcut="new Shortcut 'V' 'Vote / Unvote'"
                >
                    <i class="fa fa-caret-up"></i>
                </button>
                <div class="listling-item-votes listling-item-mode-view">
                    <p tabindex="0" title="Votes" data-content="votesMeta.count"></p>
                    <micro-contextual data-onactivate="onVotesActivate">
                        <div class="micro-entity-list">
                            <ul data-content="list votes.items 'vote'">
                                <template>
                                    <li class="micro-panel">
                                        <p><micro-user data-user="vote"></micro-user></p>
                                    </li>
                                </template>
                            </ul>
                            <ul>
                                <li class="micro-panel" data-content="switch votesComplete false">
                                    <template>
                                        <button
                                            is="micro-button" type="button"
                                            class="listling-item-more-votes link micro-panel-main"
                                            data-run="bind fetchCollection votes 10"
                                        >
                                            <i class="fa fa-ellipsis-v"></i> More
                                        </button>
                                    </template>
                                </li>
                            </ul>
                        </div>
                    </micro-contextual>
                </div>

                <button
                    is="micro-button" type="button"
                    class="listling-item-check action listling-item-mode-view"
                    data-run="checkUncheck" data-disabled="isCheckDisabled item.trashed lst.mode"
                    data-shortcut="new Shortcut 'X' 'Check / Uncheck'"
                >
                    <i
                        data-class-fa="item.checked" data-class-fa-check-square="item.checked"
                        data-class-far="not item.checked" data-class-fa-square="not item.checked"
                    ></i>
                </button>

                <h1 class="micro-panel-main">
                    <span class="listling-item-mode-view" data-content="markup item.title"></span>
                    <label class="listling-item-mode-edit">
                        <input name="title" placeholder="Title" required="required"
                               autocomplete="off" data-value="or item.title ''" />
                    </label>
                </h1>
                <ul is="micro-menu"
                    class="listling-item-menu micro-secondary listling-item-mode-view micro-interactive"
                >
                    <li class="listling-item-restore">
                        <button is="micro-button" type="button" class="action" data-run="restore"
                                data-shortcut="new Shortcut 'R'">
                            <i class="fa fa-trash-restore"></i> Restore
                        </button>
                    </li>
                    <li>
                        <button is="micro-button" type="button" class="link">
                            <i class="fa fa-bars"></i>
                        </button>
                        <ul is="micro-menu">
                            <li class="listling-item-play-pause">
                                <button
                                    is="micro-button" type="button" class="action"
                                    data-run="playablePlayPause"
                                    data-content="switch playablePlaying" title="⌨ P"
                                >
                                    <template>
                                        <i class="fa fa-fw fa-pause"></i> Pause
                                    </template>
                                    <template>
                                        <i class="fa fa-fw fa-play"></i> Play
                                    </template>
                                </button>
                            </li>
                            <li class="listling-item-edit">
                                <button
                                    is="micro-button"
                                    type="button"
                                    class="action"
                                    data-run="startEdit"
                                    data-shortcut="new Shortcut 'E'"
                                >
                                    <i class="fa fa-fw fa-pencil-alt"></i> Edit
                                </button>
                            </li>
                            <li class="listling-item-assign">
                                <button
                                    is="micro-button" type="button" class="action" data-run="assign"
                                    data-shortcut="new Shortcut 'U'"
                                >
                                    <i class="fa fa-fw fa-id-badge"></i> Assign
                                </button>
                            </li>
                            <li class="listling-item-trash">
                                <button
                                    is="micro-button"
                                    type="button"
                                    class="action"
                                    data-run="trash"
                                    data-shortcut="new Shortcut 'T'"
                                >
                                    <i class="fa fa-fw fa-trash"></i> Trash
                                </button>
                            </li>
                        </ul>
                    </li>
                </ul>
            </header>

            <div class="listling-item-content">
                <p
                    class="listling-item-assignees listling-item-mode-view"
                    data-content="list assignees 'assignee'"
                >
                    <template>
                        <span><micro-user data-user="assignee"></micro-user> </span>
                    </template>
                </p>

                <dl class="listling-item-meta">
                    <dt class="listling-item-location" title="Location">
                        <i class="fa fa-fw fa-map-marker-alt"></i>
                    </dt>
                    <dd>
                        <a
                            class="link listling-item-mode-view" data-href="makeItemURL item true"
                            data-content="item.location.name"
                        ></a>
                        <span class="listling-item-mode-view" data-content="item.location.name">
                        </span>
                        <micro-location-input
                            class="listling-item-mode-edit" name="location"
                            placeholder="Location (optional)" data-value="item.location"
                        >
                        </micro-location-input>
                    </dd>
                </dl>

                <div
                    class="listling-item-resource listling-item-mode-view"
                    data-content="resourceElem"
                >
                </div>

                <p
                    class="listling-item-text listling-item-mode-view micro-multiline"
                    data-content="markup item.text"
                ></p>

                <label class="listling-item-mode-edit">
                    <div class="micro-input-wrapper">
                        <textarea
                            name="text" placeholder="Text (optional)" data-value="or item.text ''"
                        ></textarea>
                        <div class="micro-panel">
                            <button
                                is="micro-button" type="button" class="listling-item-attach action"
                                data-run="attach" data-onclick="onAttachClick"
                            >
                                <i class="fa fa-paperclip"></i> Attach
                            </button>
                            <input
                                type="file" name="upload" data-onchange="onUploadChange"
                                accept="image/bmp,image/gif,image/jpeg,image/png,image/svg+xml,.bmp,.gif,.jpg,.png,.svg"
                            />
                            <div class="listling-item-content-input-info">
                                <button type="button" class="link">
                                    <i class="fa fa-fw fa-info-circle"></i>
                                </button>
                                <micro-contextual>
                                    <table>
                                        <thead>
                                            <tr>
                                                <td>You type:</td>
                                                <td>You get:</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>*Emphasized*</td>
                                                <td><em>Emphasized</em></td>
                                            </tr>
                                            <tr>
                                                <td>**Important**</td>
                                                <td><strong>Important</strong></td>
                                            </tr>
                                            <tr>
                                                <td>* List item</td>
                                                <td>&nbsp;• List item</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    <div class="micro-panel">
                                        <p>
                                            Attach additional content like images, videos, … by
                                            inserting a link.
                                        </p>
                                    </div>
                                </micro-contextual>
                            </div>
                        </div>
                    </div>
                </label>

                <div data-content="switch editMode">
                    <template>
                        <ul is="micro-menu">
                            <li>
                                <button
                                    is="micro-button" class="action" data-run="edit"
                                    data-shortcut="new Shortcut 'Control+Enter'"
                                >
                                    <i class="fa fa-check-circle"></i> Done
                                </button>
                            </li>
                            <li>
                                <button
                                    is="micro-button" type="button" class="link"
                                    data-run="cancelEdit" data-shortcut="new Shortcut 'Escape'"
                                >
                                    Cancel
                                </button>
                            </li>
                        </ul>
                    </template>
                </div>
            </div>

            <footer class="listling-item-footer micro-small listling-item-mode-view">
                <i class="fa fa-user-cog"></i> Item by
                <micro-user data-user="item.authors.0"></micro-user> ·
                <i class="fa fa-pencil-alt"></i> Edited by
                <span data-content="join item.authors 'user'">
                    <template><micro-user data-user="user"></micro-user></template>
                </span>
            </footer>
        </form>
    </template>
    <style>
        [is=listling-item] {
            border: 1px solid var(--micro-color-delimiter);
            border-radius: var(--micro-size-xxs);
            margin: 1.5rem 0;
            list-style: none;
            cursor: pointer;
        }

        [is=listling-item].listling-item-trashed {
            color: #888;
        }

        [is=listling-item] > form {
            position: relative;
            --listling-item-progress: 0%;
        }

        [is=listling-item] > form::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: var(--micro-size-xxs);
            border-radius: var(--micro-size-xxs) var(--micro-size-xxs) 0 0;
            background: var(--micro-color-primary) content-box;
            padding-right: calc(100% - var(--listling-item-progress));
        }

        [is=listling-item] header {
            margin: 0;
        }

        [is=listling-item] .micro-ol-handle {
            padding: calc(1.5em / 4);
            width: calc(1.5em / 2 + 1.5em / 2);
            min-width: calc(1.5em / 2 + 1.5em / 2);
            height: calc(1.5em + 1.5em / 2);
            background:
                radial-gradient(circle closest-side, #888 0%, #888 50%, transparent 50%) content-box
                    0 0 / calc(1.5rem / 4) calc(1.5rem / 4);
        }

        [is=listling-item] .micro-panel > .micro-ol-handle:focus,
        [is=listling-item] .micro-panel > .micro-ol-handle:not(:disabled):hover {
            background:
                radial-gradient(circle closest-side, #888 0%, #888 50%, transparent 50%) content-box
                    0 0 / calc(1.5rem / 4) calc(1.5rem / 4),
                var(--micro-color-delimiter);
        }

        listling-list-page:not(.listling-list-feature-vote) .listling-item-vote,
        listling-list-page:not(.listling-list-feature-vote) .listling-item-votes {
            display: none;
        }

        .micro-panel > .listling-item-vote {
            color: var(--micro-color-text-subtle);
        }

        [is=listling-item] > form.listling-item-votes-user-voted .listling-item-vote {
            color: forestgreen;
        }

        .listling-item-vote i {
            width: 1em;
            text-align: center;
            transform: scale(1.6);
        }

        .listling-item-votes micro-contextual {
            right: auto;
        }

        .micro-panel > .listling-item-check {
            color: var(--micro-color-border);
        }

        [is=listling-item].listling-item-checked:not(.listling-item-trashed) .micro-panel > .listling-item-check {
            color: forestgreen;
        }

        [is=listling-item] h1 {
            font-weight: bold;
        }

        [is=listling-item].listling-item-trashed h1 {
            color: inherit;
        }

        [is=listling-item] h1 > label {
            margin-bottom: 0;
        }

        listling-list-page:not(.listling-list-feature-assign) .listling-item-assign,
        [is=listling-item]:not(.listling-item-may-modify) .listling-item-assign {
            display: none;
        }

        .listling-item-content {
            padding: 0 var(--micro-size-xs);
            border-top: 1px solid var(--micro-color-delimiter);
        }

        [is=listling-item].listling-item-mode-view > form:not(.listling-item-has-content) .listling-item-content {
            display: none;
        }

        .listling-item-content p,
        .listling-item-content ul,
        .listling-item-content dl,
        .listling-item-content label {
            margin: var(--micro-size-rxs) 0;
        }

        .listling-item-content .micro-panel p,
        .listling-item-content .micro-entity-list > ul {
            margin: 0;
        }

        listling-list-page:not(.listling-list-feature-assign) .listling-item-assignees {
            display: none;
        }

        .listling-item-resource {
            --micro-link-max-height: calc((70ch - 2 * var(--micro-size-xs)) * 9 / 16);
            --micro-image-max-height: var(--micro-link-max-height);
            margin: var(--micro-size-xs) 0;
        }

        .listling-item-resource > * {
            display: block;
            width: auto;
        }

        [is=listling-item].listling-item-mode-edit .listling-item-meta {
            row-gap: var(--micro-size-xs);
        }

        .listling-item-text + label .micro-panel {
            border-top: 1px solid var(--micro-color-delimiter);
        }

        .listling-item-text + label input[name=upload] {
            display: none;
        }

        .listling-item-content-input-info {
            margin-left: auto;
        }

        .listling-item-content-input-info micro-contextual {
            bottom: 100%;
        }

        .listling-item-content-input-info table {
            border-style: hidden;
        }

        .listling-item-content-input-info tbody td:first-child {
            font: 0.875em / 1.5 monospace, monospace;
        }

        .listling-item-footer {
            padding: var(--micro-size-rxs);
            border-top: 1px solid var(--micro-color-delimiter);
        }

        [is=listling-item] > form:not(.listling-item-expanded) .listling-item-footer {
            display: none;
        }

        [is=listling-item]:not(.listling-item-mode-view) .listling-item-mode-view,
        [is=listling-item]:not(.listling-item-mode-edit) .listling-item-mode-edit,
        [is=listling-item].listling-item-trashed .micro-ol-handle,
        listling-list-page:not(.listling-list-may-modify) .micro-ol-handle,
        listling-list-page:not(.listling-list-feature-check) .listling-item-check,
        listling-list-page:not(.listling-list-feature-check) .listling-item-uncheck,
        listling-list-page:not(.listling-list-feature-play) [is=listling-item]:not(.listling-item-may-modify) .listling-item-menu,
        [is=listling-item]:not(.listling-item-trashed) .listling-item-restore,
        [is=listling-item]:not(.listling-item-may-modify) .listling-item-restore,
        listling-list-page:not(.listling-list-feature-play) .listling-item-play-pause,
        [is=listling-item]:not(.listling-item-may-modify) .listling-item-edit,
        [is=listling-item]:not(.listling-item-may-modify) .listling-item-trash,
        [is=listling-item].listling-item-trashed .listling-item-menu li:last-child,
        body:not(.micro-ui-map-service-enabled) .listling-item-meta,
        listling-list-page:not(.listling-list-feature-location) .listling-item-meta,
        [is=listling-item].listling-item-mode-view:not(.listling-item-has-location) .listling-item-meta,
        [is=listling-item].listling-item-has-location-coords .listling-item-location + dd > span,
        [is=listling-item]:not(.listling-item-has-location-coords) .listling-item-location + dd > a {
            display: none;
        }
    </style>

    <template class="listling-create-list-event-template">
        <a class="link" data-href="makeListURL event.detail.lst"
           data-content="event.detail.lst.title">
        </a>
        was created by <micro-user data-user="event.user"></micro-user>
    </template>

    {% include 'listling/components/list.html' %}
    {% include 'listling/components/start.html' %}
</body>
